
---
title: "Replication of Karlan & List (2007)"
author: "Ouwen Jia"
format: html
jupyter: python3
---

## Introduction

This project replicates the core results from *Karlan & List (2007)*, which examines whether and how matching donations affect charitable giving. The authors conducted a field experiment by sending over 50,000 fundraising letters and testing the effect of different matching grant offers on donation behavior. The analysis focuses on the donation response rate and amount across various treatment arms, especially on whether higher match ratios (e.g., 3:1) lead to higher giving compared to a simple 1:1 match.

## Data

We use the original dataset provided by the authors, which contains 50,083 observations and includes variables indicating treatment assignment, match ratio, donation amount, and several demographic or contextual indicators.

```{python echo=False}
import pandas as pd

# Load data
df = pd.read_stata("karlan_list_2007.dta")

# Basic structure
df[["treatment", "gave", "amount", "ratio", "size", "ask"]].describe(include="all")
```

## Exploratory Analysis

Before diving into regression modeling, we first visualize key metrics to understand how treatment and match ratio influence donation behaviors.

### Donation Response Rate: Control vs Treatment

```{python echo=False}
import matplotlib.pyplot as plt

# Calculate response rate
grouped = df.groupby("treatment").agg(response_rate=("gave", "mean")).reset_index()

# Plot
plt.bar(["Control", "Treatment"], grouped["response_rate"], color=["#1f77b4", "#ff7f0e"])
plt.ylabel("Donation Response Rate")
plt.title("Response Rate by Treatment Group")
plt.show()
```

### Donation Rate by Match Ratio (1:1, 2:1, 3:1)

```{python echo=False}
import seaborn as sns

# Filter only treated and group by ratio
ratio_stats = df[df['treatment'] == 1].groupby("ratio").agg(response_rate=("gave", "mean")).reset_index()

sns.barplot(data=ratio_stats, x="ratio", y="response_rate", palette="pastel")
plt.ylabel("Response Rate")
plt.title("Donation Rate by Match Ratio")
plt.show()
```

## Regression Results

Next, we use a logistic regression model to formally estimate the effect of treatment status and match ratio on the probability of donating.

```{python echo=False}
import statsmodels.api as sm
import statsmodels.formula.api as smf

# Logistic regression
model = smf.logit("gave ~ treatment + ratio2 + ratio3", data=df).fit()
```

```{python echo=False}
# Format results for better display
summary_df = model.summary2().tables[1]
print(summary_df.round(3).to_markdown())
```

## Conclusion

Our replication confirms that matching offers significantly increase donation rates. However, consistent with the original study, we find that increasing the match ratio beyond 1:1 (e.g., to 2:1 or 3:1) does **not** lead to significantly higher response rates or donation amounts. This suggests diminishing marginal returns to the match ratio â€” an important insight for fundraisers seeking to maximize impact.
